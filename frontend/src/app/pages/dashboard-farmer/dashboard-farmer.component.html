<div class="dashboard-container">
  <h1 class="dashboard-title">Farmer Dashboard</h1>
  <p class="dashboard-subtitle">Welcome, {{ userName }}! Here are the tasks assigned to you.</p>

  <div *ngIf="errorMessage" class="general-error-message">{{ errorMessage }}</div>
  <div *ngIf="isLoading" class="loading-spinner">Loading your tasks...</div>
  <div *ngIf="!isLoading && myTasks.length === 0 && !errorMessage" class="no-data">
    You have no tasks assigned. Great job!
  </div>

  <div class="table-container" *ngIf="!isLoading && myTasks.length > 0">
    <table>
      <thead>
        <tr>
          <th>Task Description</th>
          <th>Related Crop</th>
          <th>Due Date</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let task of myTasks">
          <td>{{ task.taskDescription }}</td>
          <td>{{ task.cropId?.cropName || 'N/A' }}</td>
          <td>{{ task.dueDate | date:'mediumDate' }}</td>
          <td>
            <select class="status-select" [value]="task.status" (change)="onStatusChange(task._id, $event)">
              <option value="Pending">Pending</option>
              <option value="In Progress">In Progress</option>
              <option value="Completed">Completed</option>
            </select>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>